
1. (15) Најавете се на машината со која е асоциран вашиот број на индекс. Корисничко име за
најава student, лозинка Laboratorija11!
Направете нов корисник со име ansXXXXXX, каде XXXXXX е вашиот број на индекс. Направете група
ans и додадете го тој корисник во групата. Како hostname на вашата виртуелка наместете ansdatum, каде datum е вашиот датум на раѓање во облик ddmmyyyy

→ sudo adduser ans232072 - add new user

→ sudo groupadd ans - add new group

→ sudo usermod -aG ans ans232072    
-aG се користи за додавање корисник во дополнителна група без да се отстранат постоечките групи.

→ groups ans232072 - proverka

→ sudo hostnamectl set-hostname ans27012005 - postavuvanje hostname



2.(20) Инсталирајте BIND DNS сервер, и додадете го како прв локален dns сервер на машината.
Допуштете да може да се пристапи до него (да се користи како DNS) од било која машина во
мрежата 10.10.0.0/16. Креирајте нова master зона согласно името index.io.mk, каде што index е
бројот на вашиот индекс. Во зоната додадете ги следните записи:
- NS сервери се вашиот сервер и серверот ns.ans.mk, кој има IP адреса 10.10.16.200
- A записи за ns1, www и ftp2 кои ќе покажуваат кон вашиот сервер
- A запис за dns, кој ќе покажува кон 10.10.16.200
- CNAME запис за web, кој ќе покажува кон www.index.io.mk
Овозможете forwarding-от на барањата до вашиот DNS server за зони за кои не може да одговори
да бидат проследувани до DNS серверите 1.0.0.1 и 1.1.1.1.

FIRST STEP:
sudo apt update
sudo apt install bind9

sudo nano /etc/resolv.conf → nameserver 127.0.0.1

SECOND STEP:
then we go into 
sudo nano /etc/bind/named.conf.options

allow-query { 10.10.0.0/16; localhost; }; → allows queries only from 10.10.0.0/16
listen-on → it will be at default if its not then it has to be any;
forwarders { 1.1.1.1; 1.0.0.1; }; → it allows forwarders from DNS servers

sudo named-checkconf → check syntax errors
sudo systemctl restart bind9

THIRD STEP:
sudo nano /etc/bind/named.conf.local → we configurate the local where the zones need to be

zone "232072.io.mk" {
    type master;
    file "/etc/bind/zones/db.232072.io.mk";
}; we make a master zone , meaning primary/authoritative server, and we make a zone file

the next step is going into the zone file and setting it up! 

ZONE FILE ( /etc/bind/zones/db.232072.io.mk ) :
*the /zones directory is not mandatory, its just for organization

sudo nano /etc/bind/zones/db.232072.io.mk → automatically creates a new file and starts configuring it

The order of the zone file needs to be:
$TTL → default time for caching ( default 86400 )

$SOA → Start of Authority, this NEEDS to be on the first place, tehnically is the ID card of the zone file, it tells who is the main DNS, who is the admin and the serial number/version. 
*important: . on the end of the names, if you change something you change the SERIAL number.

NS → authoritative servers, the first one is our server, the second one is ns.ans.mk, NS SHOWS NAME, NOT IP! → ns1.232072.io.mk. ( our server ) and the server ns.ans.mk.     
! NS asks Which one is the DNS server !

A → address record ns1,www,ftp2 - 10.155.2.113 (our server) | dns - 10.10.16.200
this NAME is found on this IP ADDRESS!
! A maps a domain name to the IP address !

CNAME → alias for another name, 
ex. web.232072.io.mk → www.232072.io.mk
web doesnt know the IP, it borrows it from www,  
! CNAME creates Alias !

*we already put forwarders in the second step:
forwarders { 1.1.1.1; 1.0.0.1; }; → it allows forwarders from DNS servers*

→ dig @localhost www.232072.io.mk
→ dig @localhost web.232072.io.mk
→ dig @localhost dns.232072.io.mk


DONE WITH BIND DNS! Congrats if you made it this far :)

*If you need to make slave zones:
zone "name" {
   type slave;
   masters{ ip_address; };
}


3. (10) Инсталирајте apache веб сервер.
→ sudo apt update
→ sudo apt install apache2
→ systemctl status apache2

4. (20) Инсталирајте последна стабилна верзија од Moodle во сервер блок со виртуелен хост IP
адресата на серверот и порта 8088. Инсталирајте и конфигурирајте ги сите апликации, екстензии и
сервери потребни за да проработи сајтот. Верзијата на php треба да биде тековната
(стандардната) за вашиот сервер.
